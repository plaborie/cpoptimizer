\ChapterAuthor[%
Structure Commands]{%
Structure Commands}{%
Roger \Name{Rousseau}\and Christian \Name{Scheen}}
\label{chap-struct}

This chapter describes the main commands that structure the whole book
(\latex{} preamble, front matter, main matter, and back matter; these great
subdivisions may then contain parts, chapters, sections, paragraphs, and
smaller components).

\section{Books, monographs, and edited collections}
\label{type-ouvrage}
\index{book (definition)}
\index{monograph (definition)}
\index{edited collection (definition)}

In accordance with the \Hermes{} terminology, let us use the term \emph{book}
for any typeset document whose general layout is based on the notion of a
chapter made up of several pages.
Chapters may be gathered within larger parts, and they are subdivided with
the help of smaller subtitles characterized by their level~$n$.
Subtitles of level~$1$ down to level~$4$ are allowed; in \latex{}, these
correspond respectively to \cmd{section} (level~$1$), \cmd{subsection}
(level~$2$), \cmd{subsubsection} (level~$3$), and \cmd{paragraph} (level~$4$)
commands.
According to the \hermes{} guidelines, level~$n \geq 5$ subtitles must not
appear in any actual book; in \latex{} parlance, this means that authors
should not use the \cmd{subparagraph} (level~$5$) command (see
Table~\ref{tab:Subtitles}).
Monographs, edited collections, joint works, technical reports, handbooks,
and doctoral dissertations may all be considered as books from the structural
point of view.
\Hermes{} defines monographs and edited collections; let us specify this
terminology.

\NumberedDefinition{%
In a \emph{monograph}, all chapters are written by the same author or by the
same group of authors.\index{monograph (definition)}
The book possesses a single bibliography chapter whose contents is therefore
shared by all regular chapters; the bibliography is typeset at the end of the
book, before the index.}

\NumberedDefinition{%
In an \emph{edited collection}, each chapter is written by its own author or
by its own group of authors.\index{edited collection (definition)}
The book is coordinated by one or more scientific directors.
Each chapter possesses its specific bibliography section; the bibliography is
typeset at the end of the chapter.}

\begin{Table}[!htbp]{%
\latex{}'s standard sectioning commands\\
(\latex{} levels coincide with \hermes{} levels)\label{tab:Subtitles}}
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{|l|r|l|}
 \hline
 \multicolumn{1}{|c|}{\textbf{Command}}
 & \multicolumn{1}{c|}{\textbf{Level}}
 & \multicolumn{1}{c|}{\textbf{Automatic style}} \\ \hline
 \cmd{part}\index{part@\cmd{part}}
 & $-1$ & flush right on a special page \\
 \cmd{chapter}\index{chapter@\cmd{chapter}}
 & $0$ & flush right or centered${}^{\dagger}$ \\
 \cmd{section}\index{section@\cmd{section}}
 & $1$ & upright shape, bold series \\
 \cmd{subsection}\index{subsection@\cmd{subsection}}
 & $2$ & italic shape, bold series \\
 \cmd{subsubsection}\index{subsubsection@\cmd{subsubsection}}
 & $3$ & italic shape, medium series \\
 \cmd{paragraph}\index{paragraph@\cmd{paragraph}}
 & $4$ & upright shape, medium series \\
 \cmd{subparagraph}\index{subparagraph@\cmd{subparagraph}}
 & $5$ & forbidden in \hermes{} books \\ \hline
 \multicolumn{3}{@{}l}{$\dagger$~Flush right for monographs, centered for
 edited collections.}
\end{tabular}
\end{Table}

All books are laid out along three great subdivisions:
\begin{enumerate}
 \item\index{frontmatter@\cmd{frontmatter}}
 the \emph{front matter} (\cmd{frontmatter}) contains the title page, the
 table of contents, and small unnumbered chapters.
 These unnumbered chapters have usually no subtitles at all; therefore, one
 may include, for instance, a preface, a foreword, and a small introduction
 in the front matter;
 \item\index{mainmatter@\cmd{mainmatter}}
 the \emph{main matter} (\cmd{mainmatter}) contains all regular numbered
 chapters.
 Optionally, those regular chapters may be followed by numbered appendices;
 \item\index{backmatter@\cmd{backmatter}}
 the \emph{back matter} (\cmd{backmatter}) contains the bibliography chapter
 (only in the case of a monograph), an optional glossary, and the index.
 These are all unnumbered chapters.
\end{enumerate}

Chapter numbering (and appendix numbering) is automatic and depends on its
position amongst these subdivisions.
For instance, a small introduction with few subtitles shall be placed in the
front matter, where it will automatically be typeset as an unnumbered
chapter.
On the other hand, a longer and/or structured introduction shall be placed at
the beginning of the main matter, where it will automatically be typeset as
a regular numbered chapter (of course, its subtitles will automatically be
numbered, too).
In order to disable the appearance of an unnumbered chapter in the table of
contents, one can use the starred form of the \cmd{chapter} command (namely,
\cmd{chapter*\{\meta{Chapter Title}\}}).\index{chapter*@\cmd{chapter*}}

Commands that define the general layout of the book shall be gathered in the
master \latex{} source file that we describe below.

\section{The master \latex{} source file}
\index{master latex source file@master \latex{} source file}

The master \latex{} source file defines the general layout of the book and
consists of two parts: the preamble (between the \cmd{documentclass} and the
\cmd{begin\{document\}} commands) and the document body (between the
\cmd{begin\{document\}} and the \cmd{end\{document\}} commands).
See Figure~\ref{prelude} for details.

\begin{Figure}[!htbp]{%
General structure of the \latex{} preamble\label{prelude}}
\begin{fminipage}
\begin{verbatim}

 \documentclass[<class options>]{ouvrage-hermes}[2005/11/14]

 % The LaTeX preamble may contain package loading commands and
 % user-defined LaTeX commands and environments.  The optional
 % \usepackage, \newcommand, and \newenvironment commands shall
 % be included here.

 \title[%
 Shortened Book Title]{%
 Complete Book Title\\
 with Optional Line Breaks}

 \author{%
 John \Name{Smith}\\ Paul \Name{Jones}}

 \date{%
 November~14, 2005}

 \makeindex

 \begin{document}
 % The document body is described in another section.
 \end{document}

\end{verbatim}
\end{fminipage}
\index{documentclass@\cmd{documentclass}}
\index{usepackage@\cmd{usepackage}}
\index{newcommand@\cmd{newcommand}}
\index{newenvironment@\cmd{newenvironment}}
\index{title@\cmd{title}}
\index{author@\cmd{author}}
\index{date@\cmd{date}}
\index{makeindex@\cmd{makeindex}}
\index{begindocument@\cmd{begin\{document\}}}
\index{enddocument@\cmd{end\{document\}}}
\index{document@\env{document}}
\end{Figure}

The \cmd{documentclass} command is given the \verb+ouvrage-hermes+ mandatory
parameter that specifies the name of the \class{ouvrage-hermes} document
class, and the \meta{class options} optional parameter that controls various
specific aspects of document typesetting; available class options are
described below.

\section{Class options}
\index{class option}

The default behavior of the \class{ouvrage-hermes} document class makes it
possible to typeset a monograph written in French, without crop marks, and
without blank pages printing.
According to the desired book type, the following class options will be used
(see also Table~\ref{tab:ClassOptions}):
\begin{itemize}
 \item\index{treatise class option@\texttt{treatise} (class option)}
 the \verb+treatise+ class option typesets an edited collection.
 The default behavior is to typeset a monograph;
 \item\index{english class option@\texttt{english} (class option)}
 the \verb+english+ class option typesets a book written in English.
 The default behavior is to typeset a book written in French.
 Obviously, the \latex{} format must include word-breaking hyphenation
 patterns for the intended language\footnote{The \latex{} format generation
 process is beyond the scope of this user's guide.
 Let us stress that \hermes{} uses French and American English hyphenation
 patterns.}.
 This class option defines the basic language of the book.
 However, if specific chapters are not written in the basic language, these
 shall start with the \cmd{selectlanguage\{\meta{language}\}} language
 selection command;\index{selectlanguage@\cmd{selectlanguage}}
 \item\index{cropmarks class option@\texttt{cropmarks} (class option)}
 the \verb+cropmarks+ class option draws the page borders: a first rectangle
 corresponds to the text dimensions, and a taller one shows the page limits
 (after the trimming process).\label{opt-cropmarks}
 The default behavior is to disable crop marks.
 The final copy of a book shall not exhibit crop marks;
 \item\index{allpages class option@\texttt{allpages} (class option)}
 the \verb+allpages+ class option prints out blank pages.
 The default behavior is to suppress blank pages printing.
 This class option enables one to save printing (let us recall that chapters
 always start on odd pages).
 The final copy of a book shall enable blank pages printing.
\end{itemize}

\begin{Table}[!htbp]{%
Class options and their implied behavior\label{tab:ClassOptions}}
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{|l|l|l|}
 \hline
 \multicolumn{1}{|c|}{\textbf{Class option}}
 & \multicolumn{1}{c|}{\textbf{Implied behavior}}
 & \multicolumn{1}{c|}{\textbf{Default behavior}} \\ \hline
 \texttt{treatise}
 \index{treatise class option@\texttt{treatise} (class option)}
 & typeset an edited collection & typeset a monograph \\
 \texttt{english}
 \index{english class option@\texttt{english} (class option)}
 & typeset a book in English & typeset a book in French \\
 \texttt{cropmarks}
 \index{cropmarks class option@\texttt{cropmarks} (class option)}
 & enable crop marks drawing & disable crop marks drawing${}^{\dagger}$ \\
 \texttt{allpages}
 \index{allpages class option@\texttt{allpages} (class option)}
 & enable blank pages printing${}^{\dagger}$ & disable blank pages printing
 \\ \hline
 \multicolumn{3}{@{}l}{$\dagger$~Required behavior for the final copy.}
\end{tabular}
\end{Table}

Let us now consider the \latex{} preamble details.

\section{\latex{} preamble}
\index{preamble}
\index{latex preamble@\latex{} preamble}

The \latex{} preamble shall successively contain (see Figure~\ref{prelude}):
\begin{enumerate}
 \item\index{usepackage@\cmd{usepackage}}
 optional package loading commands.
 For instance, one might want to use the \cmd{usepackage[fleqn]\{amsmath\}}
 command in order to load advanced mathematical structures designed by the
 American Mathematical Society;
 \item\index{newcommand@\cmd{newcommand}}
 \index{newenvironment@\cmd{newenvironment}}
 \index{def@\cmd{def}}
 optional user-defined commands and environments.
 User-defined structures shall be defined with the \cmd{newcommand} and
 \cmd{newenvironment} \latex{} commands; one should not use plain \tex{}
 commands (such as \cmd{def},~etc.\@);
 \item\index{title@\cmd{title}}
 the \cmd{title[\meta{Shortened Book Title}]\{\meta{Complete Book Title}\}}
 statement.
 The \meta{Shortened Book Title} parameter is used as the running title on
 even pages and its length shall not exceed~55\,mm in 9\,pt~font size; the
 \class{ouvrage-hermes} document class raises a warning message when this
 condition is not met;
 \item\index{author@\cmd{author}}\index{Name@\cmd{Name}}
 the \cmd{author} statement.\index{backslashbackslash@\bsbs{}}
 The \cmd{Name} command distinguishes surnames from given names.
 The \bsbs{} command separates the full names of successive authors.
 The example below shows the exact syntax;
 \item\index{date@\cmd{date}}
 the \cmd{date\{\meta{version date}\}} statement, as usual.
\end{enumerate}

\Example{%
The \cmd{author} statement shall be given as follows:}
\begin{quote}
\begin{verbatim}
\author{%
<Given name #1> \Name{<Surname #1>}\\
<Given name #2> \Name{<Surname #2>}}
\end{verbatim}
\end{quote}

\section{Document body}
\index{document body}

Within the document body, the top-level structure commands are
\cmd{frontmatter},\index{frontmatter@\cmd{frontmatter}}
\cmd{mainmatter},\index{mainmatter@\cmd{mainmatter}} and
\cmd{backmatter}.\index{backmatter@\cmd{backmatter}}

The contents of each chapter shall be placed within one single dedicated
file; chapter files shall be included with the\index{include@\cmd{include}}
\cmd{include} (not\index{input@\cmd{input}} \cmd{input}) command in the
master \latex{} source file.
In the case of an edited collection, where each chapter has its own
bibliography section, this requirement is mandatory.

Some unnumbered chapters such as the table of contents, the bibliography
chapter (in the case of a monograph), and the index are produced by specific
commands placed at appropriate positions in the master \latex{} source file.

The optional \cmd{appendix}\index{appendix@\cmd{appendix}} command notifies
the start of the appendices.
In order to generate appropriate table of contents entries, the
\cmd{appendix}\index{appendix@\cmd{appendix}} command shall be placed at the
beginning of the first included appendix file (not in the master \latex{}
source file itself).

Figure~\ref{corps-docu} gives a rather complete example of document body;
see Figure~\ref{prelude} for its location within the whole master \latex{}
source file.

As already mentioned, authors should definitely \emph{not} use the \latex{}
source files of this user's guide as the starting point of the \latex{}
source files of any actual book; the \dir{Ouvrage-Hermes} top-level directory
holds suitable templates of master \latex{} source files:
\begin{itemize}
 \item\index{hsp-monograph.ltx@\file{hsp-monograph.ltx}}
 for monographs, use the \file{hsp-monograph.ltx} template,
 \item\index{hsp-treatise.ltx@\file{hsp-treatise.ltx}}
 for edited collections, use the \file{hsp-treatise.ltx} template.
\end{itemize}

\begin{Figure}[!htbp]{%
General structure of the document body\label{corps-docu}}
\begin{fminipage}
\begin{verbatim}

 \begin{document}

 \frontmatter %--------------------

 \maketitle
 \include{preface}
 \tableofcontents
 \include{foreword}
 \include{introduction}

 \mainmatter %--------------------

 \part[<Short Title for Part #1>]{<Complete Title for Part #1>}

 \include{chapter1}
 \include{chapter2}

 \part[<Short Title for Part #2>]{<Complete Title for Part #2>}

 \include{chapter3}
 \include{chapter4}

 % Appendices

 \include{appendix1} % starts with the \appendix command
 \include{appendix2}

 \backmatter %--------------------

 \bibliography{bibtex-database} % only in the case of monographs
 \printindex
 \Publisher{01 23 45 67 89}{98 76 54 32 10}{user@provider.com}

 \end{document}

\end{verbatim}
\end{fminipage}
\index{begindocument@\cmd{begin\{document\}}}
\index{enddocument@\cmd{end\{document\}}}
\index{document@\env{document}}
\index{frontmatter@\cmd{frontmatter}}
\index{mainmatter@\cmd{mainmatter}}
\index{backmatter@\cmd{backmatter}}
\index{maketitle@\cmd{maketitle}}
\index{tableofcontents@\cmd{tableofcontents}}
\index{include@\cmd{include}}
\index{part@\cmd{part}}
\index{appendix@\cmd{appendix}}
\index{bibliography@\cmd{bibliography}}
\index{printindex@\cmd{printindex}}
\index{Publisher@\cmd{Publisher}}
\end{Figure}

\section{Front matter}
\index{front matter}

The table of contents is the only mandatory component of the front matter; it
is produced by the usual\index{tableofcontents@\cmd{tableofcontents}}
\cmd{tableofcontents} command.
The table of contents usually contains entries for all level~$1$ to level~$3$
subtitles.
If page constraints come into play, it is possible to reduce the table of
contents ``depth'' with the following command (that shall be placed in the
preamble of the master \latex{} source file):
\begin{quote}
\index{setcounter@\cmd{setcounter}}
\index{tocdepth counter@\cntr{tocdepth} (counter)}
\begin{verbatim}
\setcounter{tocdepth}{2}
\end{verbatim}
\end{quote}

Front matter chapters are unnumbered; moreover, the following behavior
applies:
\begin{itemize}
 \item\index{chapter@\cmd{chapter}}
 chapters that use the \cmd{chapter} command have an entry in the table of
 contents (for instance, \cmd{chapter\{Introduction\}});
 \item\index{chapter*@\cmd{chapter*}}
 chapters that use the \cmd{chapter*} command have no entry in the table of
 contents (for instance, \cmd{chapter*\{Preface\}}).
\end{itemize}

\section{Main matter}
\index{main matter}

\subsection{Book parts}

Main matter chapters are numbered and may optionally be gathered within
larger parts that are defined by the \cmd{part[\meta{Shortened Part
Title}]\{\meta{Complete Part Title}\}} command.\index{part@\cmd{part}}
The \meta{Shortened Part Title} argument is optional.
The \meta{Complete Part Title} argument is mandatory; it is possible to
break the complete title into multiple lines with the help of the \bsbs{}
command.\index{backslashbackslash@\bsbs{}}

\Example{%
The \cmd{part} statement shall be given as follows:}
\begin{quote}
\begin{verbatim}
\part[%
Hermes Guidelines]{%
Hermes Guidelines\\
for Monographs and Edited Collections}
\end{verbatim}
\end{quote}

\subsection{Monograph chapters}
\label{ssec:MonographChapters}

In the case of monographs, chapters are stated with the classical command,
namely \cmd{chapter[\meta{Shortened Chapter Title}]\{\meta{Complete Chapter
Title}\}}.\index{chapter@\cmd{chapter}}
The \meta{Complete Chapter Title} argument is mandatory.
If its length exceeds~55\,mm in 9\,pt~font size, then the \meta{Shortened
Chapter Title} argument will also be provided; it is used as the running
title on odd pages.
It is possible to break the complete title into multiple lines with the help
of the \bsbs{} command.\index{backslashbackslash@\bsbs{}}

\subsection{Edited collection chapters}
\index{ChapterAuthor@\cmd{ChapterAuthor}}

In the case of edited collections, chapters shall be stated with the new
command \cmd{ChapterAuthor[\meta{Shortened Chapter Title}]\{\meta{Complete
Chapter Title}\}\{\meta{Authors Full Names}\}} that possesses one optional
argument (\meta{Shortened Chapter Title}) and two mandatory arguments
(\meta{Complete Chapter Title} and \meta{Authors Full Names}).
The complete title and its optional short rewording shall be used as in the
case of the classical \cmd{chapter}\index{chapter@\cmd{chapter}} command (see
paragraph~\ref{ssec:MonographChapters}); authors full names shall be stated
as in the example below.

\Example{%
The \cmd{ChapterAuthor} statement shall be given as follows:}
\begin{quote}
\begin{verbatim}
\ChapterAuthor[%
Shortened Chapter Title]{%
Complete Chapter Title}{%
John \Name{Smith}\and Paul \Name{Jones}}
\end{verbatim}
\end{quote}

The \cmd{Name}\index{Name@\cmd{Name}} command distinguishes surnames from
given names; the \cmd{and}\index{and@\cmd{and}} command separates the full
names of successive authors.
Authors full names are automatically typeset as an unnumbered footnote on the
first page of the chapter and as an entry in the table of contents.
This information is introduced by a sentence in the appropriate language
(<<~Chapitre rédigé par~>> in French; ``Chapter written by'' in English).
The default sentence is appropriate in the case of a regular chapter, but not
in the case of a special unnumbered chapter.
For instance, in the case of an introduction, the \cmd{PresentationOfAuthors}
command shall be used according to the following
example.\index{PresentationOfAuthors@\cmd{PresentationOfAuthors}}

\Example{%
The \cmd{PresentationOfAuthors} command shall be used as follows, before the
\cmd{ChapterAuthor} command:}
\begin{quote}
\begin{verbatim}
\PresentationOfAuthors{Introduction written by~}
\ChapterAuthor{Introduction}{John \Name{Smith}}
\end{verbatim}
\end{quote}

\subsection{Appendices}

Appendices belong to the main matter; they are separated from the regular
chapters by the \cmd{appendix}\index{appendix@\cmd{appendix}} command.
Appendix chapters shall be included with the \cmd{include} (not \cmd{input})
command,\index{include@\cmd{include}}\index{input@\cmd{input}} and the
\cmd{appendix}\index{appendix@\cmd{appendix}} command shall be placed at the
beginning of the first included appendix file (not in the master \latex{}
source file itself).

The appendices are structured as any regular chapter (with the \cmd{chapter}
or \cmd{ChapterAuthor} statement, and with the customary \cmd{section},
\cmd{subsection}, \cmd{subsubsection}, and \cmd{paragraph} sectioning
commands), but their numbering uses uppercase Latin letters and their table
of contents entries are handled differently.
Of course, all these typographic details are automatically taken into
account.

\section{Back matter}
\index{back matter}

\subsection{The glossary}
\index{glossary}

The optional glossary shall be introduced as an unnumbered back matter
chapter.
\Hermes{} does not define typesetting guidelines for glossaries.

\subsection{The bibliography}
\index{bibliography}

\subsubsection{\bibtex{} bibliography databases}

The use of \bibtex{} with \latex{} is described in a report by Oren
Patashnik~\cite{Pat88} and, for instance, in the editions of the \latex{}
``companion'' (see~\cite[p.\@~375-384, 398-407]{GMS94}
and~\cite[p.\@~761-773, 790-804]{MGBCRDS04}).
The \oh{} package includes the \bstyle{ouvrage-hermes} \bibtex{} bibliography
style file.\index{ouvrage-hermes.bst@\bstyle{ouvrage-hermes}}
It produces the \hermes{} variant of the standard \bstyle{alpha} \bibtex{}
style file; its use is automatic and straightforward.
Its only peculiarity deals with the \verb+inproceedings+ \bibtex{} entry
type.\index{inproceedings bibtex entry type@\texttt{inproceedings} (\bibtex{}
entry type)}
The new \verb+date+\index{date bibtex entry field@\texttt{date} (\bibtex{}
entry field)} \bibtex{} entry field has been introduced: it allows one to
define both the date of the scientific meeting (with \verb+date+) and the
publishing date of the associated proceedings (with \verb+year+ and
optionally \verb+month+).\index{year bibtex entry field@\texttt{year}
(\bibtex{} entry field)}\index{month bibtex entry field@\texttt{month}
(\bibtex{} entry field)}
See below for a complete example.

\Example{%
The \texttt{inproceedings} \bibtex{} entry type shall be defined as follows:}
\begin{quote}
\begin{verbatim}
@INPROCEEDINGS{Wald97,
author       = {Wald, Robert M.},
title        = {Quantum Field Theory in Curved Spacetime},
editor       = {Francaviglia, Mauro and Longhi, Giorgio and
                Lusanna, Luca and Sorace, Emanuele},
booktitle    = {Proceedings of the Fourteenth International
                Conference on General Relativity and
                Gravitation},
organization = {International Society on General Relativity
                and Gravitation},
address      = {Florence, Italy},
date         = {\Aug 6-12, 1995},
publisher    = {World Scientific, Singapore},
pages        = {401-415},
year         = {1997}}
\end{verbatim}
\end{quote}

Month names shall use the \cmd{Jan},\index{Jan@\cmd{Jan}}
\cmd{Feb},\index{Feb@\cmd{Feb}} \cmd{Mar},\index{Mar@\cmd{Mar}}
\cmd{Apr},\index{Apr@\cmd{Apr}} \cmd{May},\index{May@\cmd{May}}
\cmd{Jun},\index{Jun@\cmd{Jun}} \cmd{Jul},\index{Jul@\cmd{Jul}}
\cmd{Aug},\index{Aug@\cmd{Aug}} \cmd{Sep},\index{Sep@\cmd{Sep}}
\cmd{Oct},\index{Oct@\cmd{Oct}} \cmd{Nov},\index{Nov@\cmd{Nov}}
and \cmd{Dec}\index{Dec@\cmd{Dec}} commands: they produce consistent
language-dependent output.
All other \bibtex{} entry types and fields are standard.

\subsubsection{Bibliography chapters in monographs}

In the case of monographs, there is only one bibliography chapter whose
contents is shared by all regular chapters.

The bibliography chapter shall be typeset at the end of the book, before the
index; this is actually a matter of one simple command:
\begin{quote}
\index{bibliography@\cmd{bibliography}}
\cmd{bibliography\{\meta{\bibtex{} database file}\}}
\end{quote}
\noindent
where \file{\meta{\bibtex{} database file}[.bib]} is the file name of the
relevant \bibtex{} database file.
There shall be no \bibtex{} bibliography style file statement in the author's
\latex{} source files.

In order to produce the bibliography chapter, the \bibtex{} program shall
be run\index{bibtex program@\bibtex{} (program)} on the master \latex{}
source file.

\subsubsection{Bibliography sections in edited collections}

In the case of edited collections,\index{chapterbib.sty@\style{chapterbib}}
the \style{chapterbib} style file is automatically used in order to typeset
one bibliography section per chapter.
For proper operation of this style file, the contents of each chapter shall
be placed within one single dedicated file, and chapter files shall be
included with the \cmd{include}\index{include@\cmd{include}} (not
\cmd{input}\index{input@\cmd{input}}) command in the master \latex{} source
file.

The bibliography section shall be typeset at the end of each chapter; this is
actually a matter of two simple commands:
\begin{quote}
\index{bibliographystyle@\cmd{bibliographystyle}}
\index{bibliography@\cmd{bibliography}}
\cmd{bibliographystyle\{ouvrage-hermes\}}\\
\cmd{bibliography\{\meta{\bibtex{} database file}\}}
\end{quote}
\noindent
where \file{ouvrage-hermes[.bst]} is the mandatory \bibtex{} bibliography
style file\index{ouvrage-hermes.bst@\bstyle{ouvrage-hermes}} (the style file
is the same for all chapters) and where \file{\meta{\bibtex{} database
file}[.bib]} is the file name of the relevant \bibtex{} database file (the
database file is not necessarily the same for all chapters).

In order to produce each bibliography section, the \bibtex{} program shall
be run\index{bibtex program@\bibtex{} (program)} on each chapter file name.

\subsection{The index}

The use of \mkndx{} with \latex{} is described in reports by Pehong Chen and
Michael A.\@~Harrison~\cite{CH88} and by Leslie Lamport~\cite{Lam87}; this is
also described, for instance, in the editions of the \latex{} ``companion''
(see~\cite[p.\@~345-357]{GMS94} and~\cite[p.\@~647-659]{MGBCRDS04}).
The article by Chen and Harrison~\cite{CH88} is available as an electronic
document coming with the \mkndx{} distribution.
Index preparation is a tedious and time-consuming task that is briefly
addressed here.

\subsubsection{Index preparation}

The process successively involves the following steps:
\begin{enumerate}
 \item\index{makeidx.sty@\style{makeidx}}
 load the \style{makeidx} \latex{} style file.
 This step is already automatically done in the \class{ouvrage-hermes}
 document class file;
 \item\index{makeindex@\cmd{makeindex}}
 put a \cmd{makeindex} command in the preamble of the master \latex{} source
 file, before the \cmd{begin\{document\}} statement;
 \item\index{printindex@\cmd{printindex}}
 put a \cmd{printindex} command at the end of the master \latex{} source
 file, before the \cmd{end\{document\}} statement;
 \item\index{index@\cmd{index}}
 put \cmd{index} commands at appropriate locations in all \latex{} source
 files;
 \item\index{makeindex program@\mkndx{} (program)}
 run the \mkndx{} program on the master raw index file.
 For example, if the master \latex{} source file is \file{\meta{master}.tex},
 run \mkndx{} on \file{\meta{master}.idx} with the mandatory
 \istyle{ouvrage-hermes}\index{ouvrage-hermes.ist@\istyle{ouvrage-hermes}}
 index style file.
\end{enumerate}

However, the standard \mkndx{}\index{makeindex program@\mkndx{} (program)}
program that comes with every \tex{} system distribution has the following
shortcomings:
\begin{enumerate}
 \item its support for non-English languages is rather weak; it is especially
 difficult to sort out words with (French,~etc.\@) diacritical signs;
 \item its output does not fully comply with the \Hermes{} guidelines for
 indexes.
\end{enumerate}

Here is a list of methods to solve the above difficulties:
\begin{enumerate}
 \item\index{makeindex program@\mkndx{} (program)}
 use the standard \mkndx{} program, but pay special attention to words with
 diacritical signs; for instance, here is the index entry for the French word
 \textit{\mbox{événement}}:\index{index@\cmd{index}}
 \cmd{index\{evenement@événement\}};
 \item the designer of the \oh{} package~(RR) has set up a pipeline-based
 system that successfully addresses all the above difficulties and
 successively involves the following steps:
 \begin{enumerate}
  \item\index{makeindex-pre.awk@\preawk{}}
  pre-process the \file{\meta{master}.idx} raw index file produced by
  \latex{}.
  This step calls the included \preawk{} filter written in the AWK~language,
  and requires the \awk{}\index{awk program@\awk{} (program)} or
  \gawk{}\index{gawk program@\gawk{} (program)} program (this program is
  available under Unix, GNU/Linux, *BSD, Mac OS~X, and Microsoft
  Windows/Cygwin platforms),
  \item\index{makeindex program@\mkndx{} (program)}
  run the standard \mkndx{} program on the raw index file produced at
  step~(a) with the\index{ouvrage-hermes.ist@\istyle{ouvrage-hermes}}
  mandatory \istyle{ouvrage-hermes} index style file,
  \item\index{makeindex-post.awk@\postawk{}}
  post-process the \file{\meta{master}.ind} index file produced at step~(b).
  This step calls the included \postawk{} filter written in the AWK~language;
 \end{enumerate}
 \item\index{xindy program@\xindy{} (program)}
 one of the authors of this document~(CS) uses the \xindy{} flexible indexing
 system~\cite[p.\@~666-679]{MGBCRDS04}.
 This program is available under Unix, GNU/Linux, OS/2, and Microsoft Windows
 platforms; it may be downloaded from the Comprehensive \tex{} Archive
 Network mirrors (see \mbox{ftp://ftp.tex.ac.uk/tex-archive/support/xindy}
 for instance).
\end{enumerate}

\GenericRemark{Method~(1)}{%
The standard \mkndx{} program comes with every \tex{} system distribution;
the command line for method~(1) above is as follows:}
\begin{quote}
\index{makeindex program@\mkndx{} (program)}
\index{ouvrage-hermes.ist@\istyle{ouvrage-hermes}}
 \texttt{makeindex~-c~-l~-s~ouvrage-hermes.ist~\meta{master}.idx}
\end{quote}

\GenericRemark{Method~(2)}{%
The included \Makeindex{} Bourne shell script automatically produces a
compliant index file according to method~(2) above.
This script requires a Bourne-compatible shell (this program is available
under Unix, GNU/Linux, *BSD, Mac OS~X, and Microsoft Windows/Cygwin
platforms).
The command line for method~(2) above is as follows:}
\begin{quote}
\index{Makeindex script@\Makeindex{} (script)}
 \texttt{Makeindex~\meta{master}.idx}
\end{quote}

\GenericRemark{Method~(3)}{%
See the second edition of the \latex{} ``companion'' by
Frank \hbox{Mittelbach} \emph{et~al.\@}~\cite[p.\@~666-679]{MGBCRDS04}.}

\subsubsection{The \textup{\cmd{index}} command}
\index{index@\cmd{index}}

The index has at most two levels and its presentation may merge two or more
letters if they are underrepresented; Figure~\ref{exemple-partiel-index}
illustrates both features.

\begin{Figure}[!htbp]{%
Excerpt from an index\label{exemple-partiel-index}}
\begin{fminipage}
\vspace{4mm}
\begin{center}
 \includegraphics[width=112mm]{11.example-index.eps}
\end{center}
\vspace{4mm}
\end{fminipage}
\end{Figure}

The argument of an \cmd{index}\index{index@\cmd{index}} command contains the
mandatory level~$1$ main entry, the optional level~$2$ subentry (\emph{after}
the~``\verb+!+''~character), and the optional sort key (\emph{before}
the~``\verb+@+''~character).

Examples of level~$1$ entries are (see Figure~\ref{exemple-partiel-index}):
\begin{quote}
\index{index@\cmd{index}}
\begin{verbatim}
\index{algebra}
\index{at sign@\texttt{"@} sign}
\index{cecite@cécité}
\end{verbatim}
\end{quote}
\indent
If one uses method~(2) above, index entries may be written with explicit
diacritical signs (provided they use ISO-Latin~1 coding):
\begin{quote}
\index{index@\cmd{index}}
\begin{verbatim}
\index{cécité}
\end{verbatim}
\end{quote}

An example of level~$2$ index entry \emph{without} any specific entry for the
common word is (see Figure~\ref{exemple-partiel-index}):
\begin{quote}
\index{index@\cmd{index}}
\begin{verbatim}
\index{Cauchy!lemma}
\index{Cauchy!theorem}
\end{verbatim}
\end{quote}

An example of level~$2$ index entry \emph{with} a specific entry for the
common word is (see Figure~\ref{exemple-partiel-index}):
\begin{quote}
\index{index@\cmd{index}}
\begin{verbatim}
\index{color!}
\index{color!bright}
\index{color!cold}
\index{color!complementary}
\end{verbatim}
\end{quote}

\subsubsection{How to merge letters in the index}

If an initial letter is missing or is underrepresented, the \hermes{}
guidelines mention that this letter and an adjacent one should be merged into
one common initial (see for instance the~``G,~H''~initial in
Figure~\ref{exemple-partiel-index}).
In order to automatically produce the desired result, one should modify the
included \postawk{}\index{makeindex-post.awk@\postawk{}} filter (the use of
this filter requires the \awk{}\index{awk program@\awk{} (program)} or
\gawk{}\index{gawk program@\gawk{} (program)} program).
For instance, the following AWK~code merges the ``G''~and~``H'' initial
letters:
\begin{quote}
\begin{small}
\begin{verbatim}
/\\mkidxletter{G}/{ gsub(/{G}/,"{G, H}") ; print $0 ; next }
/\\mkidxletter{H}/{ next }
\end{verbatim}
\end{small}
\end{quote}

In order to disable this feature, it is sufficient to comment out the
relevant code lines (with the~``\verb+#+''~character).
On the other hand, the following AWK~code merges the~``I'', ``J'',~and~``K''
initial letters:
\begin{quote}
\begin{small}
\begin{verbatim}
/\\mkidxletter{I}/{ gsub(/{I}/,"{I, J, K}") ; print $0 ; next }
/\\mkidxletter{J}/{ next }
/\\mkidxletter{K}/{ next }
\end{verbatim}
\end{small}
\end{quote}

\section{Automatic typesetting procedure}

Using \bibtex{}\index{bibtex program@\bibtex{} (program)} and
\mkndx{}\index{makeindex program@\mkndx{} (program)} with \latex{} requires a
number of successive \latex{}, \bibtex{}, and \mkndx{} runs in order to get
cross-references right.
Figure~\ref{fig:Typeset} illustrates all the command lines that are required
in the case of a \emph{monograph} (we assume that the master \latex{} source
file is \file{\meta{master}.tex}).

\begin{Figure}[!htbp]{%
The typesetting procedure\label{fig:Typeset}}
\begin{fminipage}
\vspace{6pt}
\HS{}\texttt{latex~\meta{master}.tex}\\
\HS{}\texttt{bibtex~\meta{master}.aux}\\
\HS{}\texttt{latex~\meta{master}.tex}\\
\HS{}\texttt{latex~\meta{master}.tex}\\
\HS{}\texttt{makeindex~-c~-l~-s~ouvrage-hermes.ist~\meta{master}.idx}\\
\HS{}\texttt{latex~\meta{master}.tex}\\
\HS{}\texttt{latex~\meta{master}.tex}\\
\HS{}\texttt{dvips~-t~a4~\meta{master}.dvi}
\vspace{6pt}
\end{fminipage}
\index{bibtex program@\bibtex{} (program)}
\index{makeindex program@\mkndx{} (program)}
\index{ouvrage-hermes.ist@\istyle{ouvrage-hermes}}
\index{dvips driver@\dvips{} (driver)}
\end{Figure}

In the case of an \emph{edited collection}, the \bibtex{} command line of
Figure~\ref{fig:Typeset} shall be replaced by a \bibtex{} run on each chapter
file name (the \bibtex{} program shall be run once on each chapter that
possesses a bibliography section).

The \oh{} package includes\index{Makefile script@\Makefile{} (script)} a
generic \Makefile{} script that should be configured in order to drive the
\make{}\index{make program@\make{} (program)} program (this program is
available under Unix, GNU/Linux, *BSD, Mac OS~X, and Microsoft Windows/Cygwin
platforms).
The \Makefile{} script automates the whole typesetting procedure.


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "users-guide.ltx"
%%% End: 
